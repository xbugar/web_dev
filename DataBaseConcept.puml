@startuml
title Database
left to right direction
skinparam linetype ortho

entity "Users" as Users {
    * id : number <<PK>>
    --
    *username : text
    *email : text <<UNIQUE>>
    *login : text
}

entity "Events" as Events {
    * id : number <<PK>>
    --
    *title : text
    *color : number
    *event_date : DATETIME
    repeats : ENUM('day', 'week', 'month', 'year')
}

entity "User Events/Deadlines" as UserEvents {
    * id : number <<PK>>
    --
    *user_id : number <<FK>>
    *event_id : number <<FK>>
}

entity "Friendships" as Friends {
    * id : number <<PK>>
    --
    *user_id1 : number <<FK>>
    *user_id2 : number <<FK>>
    *status : ENUM('pending', 'accepted') <<DEFAULT 'pending'>>
}

entity Subjects {
    * id : number <<PK>>
    --
    *title : text
    *color : number
}

entity User_Subjects {
    * id : number <<PK>>
    --
    *user_id : number <<FK>>
    *subject_id : number <<FK>>
}

entity Subject_Times {
    * id : number <<PK>>
    --
    *subject_id : number <<FK>>
    *day_of_week : ENUM('Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday', 'Sunday')
    *start_time : TIME
    *duration : TIME
}

entity Filesystem {
    + id : number <<PK>>
    --
    *user_id : number <<FK>> <<UNIQUE>>
}

entity Admin {
    * id : number <<PK>>
    --
    *name : text
    *email : text <<UNIQUE>>
}

entity Notifications {
    * id : number <<PK>>
    --
    *message : text
    *created_at : DATETIME
}

entity Messages {
    * id : number <<PK>>
    --
    *friendship_id : number <<FK>>
    *sender_id : number <<FK>>
    *receiver_id : number <<FK>>
    *content : text
    *sent_at : DATETIME
}

entity UserNotifications {
    * id : number <<PK>>
    --
    *user_id : number <<FK>>
    *notification_id : number <<FK>>
}

Users ||--|| Filesystem : "Has one"
Subjects ||--o{ Subject_Times : "Has times"
Users ||--o{ User_Subjects : "Learns"
Subjects ||--o{ User_Subjects : "Has users"
Users ||--o{ Friends : "Has friends"
Users ||--o{ Friends : "Is friends with"
Users ||--o{ UserEvents : "Registers for"
Events ||--o{ UserEvents : "Has attendees"
Admin ||--o{ Users : "Manages"
Users ||--o{ UserNotifications : "Receives"
Notifications ||--o{ UserNotifications : "Sent to"
Friends ||--o{ Messages : "Exchanges"

@enduml